---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Contact Us">
  <section class="contact-section">
    <div class="container">
      <div class="contact-header">
        <h2>Connect With Us For</h2>
        <h3>Your Next Project</h3>
        <p>
          You can contact us through the form below, or give us a call during our office hours, 
          Monday to Friday, from 9:00 AM to 7:00 PM. Let's work together to bring your ideas to life!
        </p>
      </div>

      <form class="contact-form" id="contactForm">
        <div class="form-row">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input type="text" id="firstName" name="firstName" placeholder="Enter your first name" required />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input type="text" id="lastName" name="lastName" placeholder="Enter your last name" required />
          </div>
        </div>

        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="tel" id="phone" name="phone" placeholder="Enter your phone" required />
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" placeholder="Enter your email" required />
        </div>

        <div class="form-group">
          <label for="consultation">Consultation</label>
          <textarea id="consultation" name="consultation" rows="4" placeholder="What would you like to consult about" required></textarea>
        </div>

        <div class="form-group">
          <label for="projectInfo">Project Information</label>
          <textarea id="projectInfo" name="projectInfo" rows="4" placeholder="Tell us about your project..."></textarea>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-submit">Submit</button>
        </div>

        <div id="result"></div>
      </form>
    </div>
  </section>
</Layout>

<Footer />

<script is:inline>
const form = document.getElementById('contactForm');
const result = document.getElementById('result');

// Replace with your actual Cloudflare Worker URL
const WORKER_URL = 'https://steep-fog-e82a.wraptron-db.workers.dev/';

form.addEventListener('submit', async e => {
  e.preventDefault();

  const formData = new FormData(form);
  const data = Object.fromEntries(formData.entries());

  result.innerHTML = 'Sending message...';

  try {
    const res = await fetch(WORKER_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });

    if (!res.ok) {
      throw new Error('Failed to send form data');
    }

    const json = await res.json();
    result.innerHTML = json.message;
    form.reset();

    setTimeout(() => { result.style.display = 'none'; }, 5000);

  } catch (err) {
    console.error(err);
    result.innerHTML = 'Something went wrong. Please try again!';
  }
});
</script>

<style>
/* ---------- Contact Page Styles ---------- */
.contact-section {
  padding: 80px 20px;
  background-color: #fafafa;
  min-height: 100vh;
  display: flex;
  align-items: center;
}
.container { max-width: 800px; margin: 0 auto; width: 100%; }
.contact-header { text-align: center; margin-bottom: 50px; }
.contact-header h2, .contact-header h3 { font-size: 2.5rem; font-weight: 400; color: #333; line-height: 1.2; }
.contact-header h3 { font-style: italic; margin: 10px 0 30px; }
.contact-header p { color: #666; font-size: 1rem; line-height: 1.6; max-width: 600px; margin: 0 auto; }

.contact-form {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px; }
.form-group { margin-bottom: 25px; }
.form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; font-size: 0.95rem; }
.form-group input, .form-group textarea { width: 100%; padding: 12px 16px; border: 1px solid #e0e0e0; border-radius: 8px; font-size: 0.95rem; background-color: #fafafa; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
.form-group input:focus, .form-group textarea:focus { outline: none; border-color: #6a90b8; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); background-color: white; }
textarea { resize: vertical; min-height: 100px; }
.form-actions { margin-top: 40px; }
.btn-submit { background: #6a90b8; color: white; border: none; padding: 14px 30px; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; width: 100%; }
.btn-submit:hover { transform: translateY(-1px); }
.form-group input:invalid:not(:placeholder-shown), .form-group textarea:invalid:not(:placeholder-shown) { border-color: #dc2626; }
.form-group input:valid:not(:placeholder-shown), .form-group textarea:valid:not(:placeholder-shown) { border-color: #16a34a; }

/* Mobile Responsiveness */
@media (max-width: 768px) {
  .contact-section { padding: 60px 15px; }
  .contact-header h2, .contact-header h3 { font-size: 2rem; }
  .contact-header p { font-size: 0.95rem; }
  .contact-form { padding: 30px 20px; }
  .form-row { grid-template-columns: 1fr; gap: 0; }
}
@media (max-width: 480px) {
  .contact-section { padding: 40px 10px; }
  .contact-header h2, .contact-header h3 { font-size: 1.75rem; }
  .contact-form { padding: 25px 15px; }
  .form-group input, .form-group textarea { padding: 10px 14px; }
  .btn-submit { padding: 12px 25px; }
}
</style>
